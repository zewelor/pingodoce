# AI Agent Context

This file provides context for AI agents working on this project.

## Project Status

- **Stage**: Development / Pre-production
- **Database**: Can be safely dropped and re-seeded
- **Backward compatibility**: NOT required

The database schema can change freely. All data can be regenerated by running `just sync` to fetch transaction history from the API.

## Key Information

### Database

- **Type**: SQLite only
- **Location**: `data/pingodoce.db`
- **Reset**: Delete the file and run `just db_setup && just sync`

### API

- **Base URL**: https://app.pingodoce.pt
- **Authentication**: Phone number + password
- **Documentation**: See `docs/API.md`

### Data Sources

- Transaction history from user's Pingo Doce account
- Product catalog data (EAN, nutrition, ingredients) from search API
- All data can be regenerated from API

## Development Commands

```bash
just build       # Build Docker image
just db_setup    # Create database tables
just sync        # Sync transactions from API
just barcode EAN # Lookup product by barcode
just stats       # Show database statistics
just test        # Run tests
just lint        # Run linter
```

## Architecture

- `Client` - API communication
- `Storage` - Database operations (Sequel ORM)
- `Analytics` - High-level analytics service
- `ProductEnricher` - Enriches products with catalog data
- `NutritionParser` - Parses Portuguese nutrition labels from HTML
- `CLI` - Thor-based command line interface

## Notes

- Products are automatically enriched with EAN, nutrition, and ingredients during sync
- The API uses Portuguese language for nutrition labels
- Store ID 17 is used as default for catalog lookups (configurable via DEFAULT_STORE_ID)
